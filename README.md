# Audio-spectrum-analyzer-on-RP2040-and-neopixel-16x16  
Calculating the spectrum of an audio signal and displaying it on a WS2812B RGB LED panel using MicroPython on the RP2040 (Raspberry Pi Pico) platform.
---

## üì¶ –û—Å–Ω–æ–≤–Ω—ñ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏

#### –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è:
- –ü–æ–≤–Ω–∏–π –¥—ñ–∞–ø–∞–∑–æ–Ω —á–∞—Å—Ç–æ—Ç 40–ì—Ü - 18–∫–ì—Ü
- 16 —á–∞—Å—Ç–æ—Ç–Ω–∏—Ö —Å–º—É–≥ —Ä–æ–∑–¥—ñ–ª–µ–Ω—ñ –ø–æ –ª–æ–≥–∞—Ä–∏—Ñ–º—ñ—á–Ω–æ-–ø–æ–¥—ñ–±–Ω–æ–º—É –∑–∞–∫–æ–Ω—É
- 16 —Ä—ñ–≤–Ω—ñ–≤ —É —Å–ø—ñ–≤–≤—ñ–¥–Ω–æ—à–µ–Ω–Ω—ñ –∑–Ω–∞—á–µ–Ω—å dBFS –¥–ª—è –∫–æ–∂–Ω–æ—ó —Å–º—É–≥–∏ —á–∞—Å—Ç–æ—Ç
- –†–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ –¥–∏–Ω–∞–º—ñ—á–Ω–∏–π –º–∞—Å—à—Ç–∞–± (AGC –ø–æ —Å–º—É–≥–∞—Ö) –¥–ª—è –ø—Ä–∏—Ä–æ–¥–Ω—å–æ–≥–æ –≤—ñ–∑—É–∞–ª—å–Ω–æ–≥–æ —Å–ø—Ä–∏–π–Ω—è—Ç—Ç—è —Å–ø—ñ–≤–≤—ñ–¥–Ω–æ—à–µ–Ω—å —Å–ø–µ–∫—Ç—Ä–∞–ª—å–Ω–∏—Ö —Å–∫–ª–∞–¥–æ–≤–∏—Ö
- –®–≤–∏–¥–∫—ñ—Å—Ç—å –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è —Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–∏–±–ª–∏–∑–Ω–æ 14 FPS
- –°–ø–µ–∫—Ç—Ä –≤—ñ–¥–æ–±—Ä–∞–∂–∞—î—Ç—å—Å—è –Ω–∞ –≤–µ—Å—å –µ–∫—Ä–∞–Ω –ø—Ä–∏ –∑–º—ñ–Ω—ñ —Ä—ñ–≤–Ω—ñ–≤ –∞–∫—É—Å—Ç–∏—á–Ω–∏—Ö —Å–∏–≥–Ω–∞–ª—ñ–≤ —ñ –Ω–µ –ø–æ—Ç—Ä–µ–±—É—î –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å –ø—ñ–¥—Å–∏–ª–µ–Ω–Ω—è-–∑–∞—Ç—É—Ö–∞–Ω–Ω—è –ø—Ä–∏ –∑–º—ñ–Ω—ñ —Ä—ñ–≤–Ω—è —Ç–∞ –¥–∂–µ—Ä–µ–ª–∞ –∞–∫—É—Å—Ç–∏—á–Ω–æ–≥–æ —Å–∏–≥–Ω–∞–ª—É

#### –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ FFT:
- —Ä–æ–∑–º—ñ—Ä **N = 1024**
- –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–æ –≤—ñ–∫–æ–Ω–Ω—É —Ñ—É–Ω–∫—Ü—ñ—é –•–∞–Ω–Ω–∞ (Hanning window)
- —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è - **kissFFT (float)**; –æ–±—á–∏—Å–ª–µ–Ω–Ω—è –µ–Ω–µ—Ä–≥—ñ—ó –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è –≤ C. –î–ª—è —Ü—å–æ–≥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–æ –º–æ–¥—É–ª—å `fastfft` (https://github.com/Alex-Teteria/Fast-FFT-module-for-MicroPython-RP2040-)  

#### –ê–¶–ü:  
- —á–∞—Å—Ç–æ—Ç–∞ —Å–µ–º–ø–ª—É–≤–∞–Ω–Ω—è `Fs = 44 –∫–ì—Ü `, –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–æ —á–∞—Ç–æ—Ç–∞ –ù–∞–π–∫–≤—ñ—Å—Ç–∞ - 22 –∫–ì—Ü, —Ç–æ–º—É –∞–Ω—Ç–∏–∞–ª—ñ–∞—Å–æ–≤–∏–π —Ñ—ñ–ª—å—Ç—Ä –Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è
- –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–æ C-–º–æ–¥—É–ª—å `adc_dma` (https://github.com/Alex-Teteria/MicroPython-RP2040-ADC-DMA-Extension), —è–∫–∏–π —Ä–æ–±–∏—Ç—å –æ–¥–Ω–æ—Ä–∞–∑–æ–≤–µ (one-shot / burst) –∑—á–∏—Ç—É–≤–∞–Ω–Ω—è ADC –∑ –∞–ø–∞—Ä–∞—Ç–Ω–∏–º —Ç–∞–∫—Ç—É–≤–∞–Ω–Ω—è–º —ñ DMA-–∑–∞–ø–∏—Å–æ–º —É RAM, —â–æ –∑–∞–±–µ–∑–ø–µ—á—É—î –º—ñ–Ω—ñ–º–∞–ª—å–Ω–∏–π –¥–∂–∏—Ç–µ—Ä —Ç–∞ –≤–∏—Å–æ–∫—É —Å—Ç–∞–±—ñ–ª—å–Ω—ñ—Å—Ç—å —á–∞—Å—Ç–æ—Ç–∏ —Å–µ–º–ø–ª—É–≤–∞–Ω–Ω—è
---
##  üèóÔ∏è –°—Ö–µ–º–∞ —Å–∫–ª–∞–¥–∞–Ω–Ω—è
–ó—ñ–±—Ä–∞—Ç–∏ —Å—Ö–µ–º—É —Ç–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ —Ñ–∞–π–ª–∏ –≤ –º—ñ–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–µ—Ä. –°—Ö–µ–º–∞ –Ω–µ –ø–æ—Ç—Ä–µ–±—É—î –¥–æ–¥–∞—Ç–∫–æ–≤–∏—Ö –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å.  

–û—Å–Ω–æ–≤–Ω—ñ –º–æ–¥—É–ª—ñ:
- –º—ñ–∫—Ä–æ—Ñ–æ–Ω –∑ –ø—ñ–¥—Å–∏–ª—é–≤–∞—á–µ–º –Ω–∞ –º—ñ–∫—Ä–æ—Å—Ö–µ–º—ñ MAX4466 (—á–∞—Å—Ç–æ—Ç–Ω–∏–π –¥—ñ–∞–ø–∞–∑–æ–Ω 20–ì—Ü - 20–∫–ì—Ü; –∫–æ–µ—Ñ—ñ—Ü—ñ—î–Ω—Ç –ø—ñ–¥—Å–∏–ª–µ–Ω–Ω—è –≤—ñ–¥ 25 –¥–æ 125);
- WS2816 RGB LED –ø–∞–Ω–µ–ª—å, 16—Ö16 —Å–≤—ñ—Ç–ª–æ–¥—ñ–æ–¥—ñ–≤;
- –º–æ–¥—É–ª—å –º—ñ–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–µ—Ä–∞ RP2040 (Pi Pico).  

–î–ª—è –∂–∏–≤–ª–µ–Ω–Ω—è –º–æ–¥—É–ª—è MAX4466 —Å–ª—ñ–¥ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ –≤–∏—Ö—ñ–¥ 3,3V –ø–ª–∞—Ç–∏ Pi Pico. –í–∏—Ö—ñ–¥–Ω–∏–π —Å–∏–≥–Ω–∞–ª –º–æ–¥—É–ª—è MAX4466 –º–∞—î –ø–æ—Å—Ç—ñ–π–Ω–µ –∑–º—ñ—â–µ–Ω–Ω—è (DC offset) –Ω–∞ —Ä—ñ–≤–Ω—ñ –ø–æ–ª–æ–≤–∏–Ω–∏ –Ω–∞–ø—Ä—É–≥–∏ –∂–∏–≤–ª–µ–Ω–Ω—è, —Ç–æ–º—É –∑'—î–¥–Ω—É–≤–∞—Ç–∏ –π–æ–≥–æ –∑ –≤—Ö–æ–¥–æ–º –ê–¶–ü –º–æ–∂–Ω–∞ –±–µ–∑–ø–æ—Å–µ—Ä–µ–¥–Ω—å–æ (–≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–æ pin 26).  

## :page_facing_up: –ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è —Ñ–∞–π–ª—ñ–≤

| –§–∞–π–ª | –ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è |
| --- | --- |
| neo_spectr.py | –û—Å–Ω–æ–≤–Ω–∏–π –∫–æ–¥  |
| neo_matrix.py | –ú–æ–¥—É–ª—å –º—ñ—Å—Ç–∏—Ç—å –∫–ª–∞—Å NeoMatrixFast –¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑ WS2816 LED –ø–∞–Ω–µ–ª—è–º–∏ |
| build_band_spectr.md | –æ–ø–∏—Å –∞–ª–≥–æ—Ä–∏—Ç–º—É —Ç–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤ —Ñ—É–Ω–∫—Ü—ñ—ó `build_band_spectr()` |

---

## üìÑ Credits and License
- Licensed under MIT.
- **kissFFT**: This project uses the [kissFFT](https://github.com/mborgerding/kissfft) library by Mark Borgerding, licensed under the **BSD 3-Clause License**.
---  
